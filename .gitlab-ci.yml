image: node

stages:
  - build
  - test

install-job:
  stage: build
  tags:
    - argus
  script:
    - yarn install

unit-test-job:
  stage: test
  tags: 
    - argus
  before_script:
    - yarn install
  script:
    - yarn run test --verbose
  coverage: /All files[^|]*\|[^|]*\s+([\d\.]+)/
  artifacts:
    reports:
      coverage_report:
        coverage_format: cobertura
        path: coverage/cobertura-coverage.xml

